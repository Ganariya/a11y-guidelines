.. _category-form:

フォーム
----------------------------

これらのガイドラインは、一般的な入力フォームに加え、input要素などフォーム・コントロールを利用している、一見フォームとは思えないようなコンテンツも対象としています。

.. _form-labeling:

適切なラベル付け
~~~~~~~~~~~~~~~~

参考: :ref:`exp-form-labeling`

.. _gl-form-label:

-  [MUST] フォーム・コントロールには、表示されているテキストをラベルとして明示的に関連付ける。

   .. raw:: html

      <details>

   意図
      *  視覚障害者が、フォーム・コントロールの目的を容易に判断することができるようにする。
   チェック内容
      *  フォーム・コントロールの役割が分かるテキストがラベルとして表示されていて、このテキストをクリックすると当該のフォーム・コントロールにフォーカスが移動する。 ( ``label`` 要素と ``for`` 属性で適切なラベル付けがされている。)
   チェック対象
      |visual| 、 |behavior| 、 |markup|
   対応するWCAG 2.1の達成基準
      *  SC 1.1.1:

         *  |SC 1.1.1|
         *  |SC 1.1.1ja|

      *  SC 1.3.1:

         *  |SC 1.3.1|
         *  |SC 1.3.1ja|

      *  SC 2.4.6:

         *  |SC 2.4.6|
         *  |SC 2.4.6ja|

      *  SC 2.5.3:

         *  |SC 2.5.3|
         *  |SC 2.5.3ja|

      *  SC 3.3.2:

         *  |SC 3.3.2|
         *  |SC 3.3.2ja|

   .. raw:: html

      </details>

   .. _gl-form-hidden-label:
-  [MUST] フォーム・コントロールに対して表示されているテキストを用いたラベル付けができない場合は、非表示のテキストを用いてラベルを付ける。

   .. raw:: html

      <details>

   意図
      *  視覚障害者が、フォーム・コントロールの目的を容易に判断することができるようにする。
   チェック内容
      *  フォーム・コントロールに対して ``label`` 要素と ``for`` 属性でのラベル付けができていない場合は、 ``aria-label`` 属性を用いて適切なラベルが指定されている。
   チェック対象
      |markup|
   対応するWCAG 2.1の達成基準
      *  SC 1.1.1:

         *  |SC 1.1.1|
         *  |SC 1.1.1ja|

      *  SC 1.3.1:

         *  |SC 1.3.1|
         *  |SC 1.3.1ja|

      *  SC 2.4.6:

         *  |SC 2.4.6|
         *  |SC 2.4.6ja|

      *  SC 3.3.2:

         *  |SC 3.3.2|
         *  |SC 3.3.2ja|

   .. raw:: html

      </details>

.. _form-color-only:

色のみによる表現を用いない
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. _gl-form-color-only:

-  [MUST] 必須項目やエラー表示に際して、色に加えて他の視覚的要素も用いる。

   .. raw:: html

      <details>

   意図
      *  視覚障害者や色弱者が、コンテンツを利用できるようにする。
   チェック内容
      *  グレースケール表示にしても、エラーや必須項目を特定できる。
   チェック対象
      |visual|
   参考
      *  :ref:`exp-color-only`
      *  :ref:`exp-grayscale`
   対応するWCAG 2.1の達成基準
      *  SC 1.3.3:

         *  |SC 1.3.3|
         *  |SC 1.3.3ja|

      *  SC 1.4.1:

         *  |SC 1.4.1|
         *  |SC 1.4.1ja|

   .. raw:: html

      </details>


.. _form-timing:

制限時間
~~~~~~~~~~~~~~~~~~~~

.. todo:: 制限時間について、現実的なところを検討する。

参考: :ref:`exp-timing`

.. _gl-form-timing:

-  [MUST] フォーム入力に制限時間を設定する場合は、次に挙げる事項のうち、少なくとも一つを満たす。

   -  解除: 制限時間があるフォームを利用する前に、ユーザーがその制限時間を解除することができる。又は、
   -  調整: 制限時間があるフォームを利用する前に、ユーザーが少なくともデフォルト設定の10 倍を超える、大幅な制限時間の調整をすることができる。又は、
   -  延長: 時間切れになる前にユーザーに警告し、かつ少なくとも 20秒間の猶予をもって、例えば「スペースキーを押す」などの簡単な操作により、ユーザーが制限時間を10 回以上延長することができる。又は、
   -  リアルタイムの例外: リアルタイムのイベント (例えば、オークション)において制限時間が必須の要素で、その制限時間に代わる手段が存在しない。又は、
   -  必要不可欠な例外: 制限時間が必要不可欠なもので、制限時間を延長することがフォームを無効にすることになる。又は、
   -  20 時間の例外: 制限時間が 20 時間よりも長い。

   .. raw:: html

      <details>

   意図
      *  コンテンツの読み取りや理解に時間がかかる場合や、入力操作などに時間がかかる場合にも問題なくフォームを利用できるようにする。
   チェック内容
      *  .. todo:: 制限時間のチェック内容を検討
   チェック対象
      |functionality|
   対応するWCAG 2.1の達成基準
      *  SC 2.2.1:

         *  |SC 2.2.1|
         *  |SC 2.2.1ja|

   .. raw:: html

      </details>

   .. _gl-form-no-timing:
-  [SHOULD] 入力や操作に制限時間を設けない。

   .. raw:: html

      <details>

   意図
      *  コンテンツの読み取りや理解に時間がかかる場合や、入力操作などに時間がかかる場合にも問題なくフォームを利用できるようにする。
   チェック内容
      *  .. todo:: 制限時間のチェック内容を検討
   チェック対象
      |functionality|
   対応するWCAG 2.1の達成基準
      *  SC 2.2.3:

         *  |SC 2.2.3|
         *  |SC 2.2.3ja|

   .. raw:: html

      </details>

   .. _gl-form-continue:
-  [SHOULD] 制限時間を超過した場合も、データを失うことなくユーザーが操作を継続できるようにする。

   .. raw:: html

      <details>

   意図
      *  コンテンツの読み取りや理解に時間がかかる場合や、入力操作などに時間がかかる場合にも問題なくフォームを利用できるようにする。
   チェック内容
      *  .. todo:: 制限時間のチェック内容を検討
   チェック対象
      |functionality|
   対応するWCAG 2.1の達成基準
      *  SC 2.2.5:

         *  |SC 2.2.5|
         *  |SC 2.2.5ja|

   .. raw:: html

      </details>


.. _form-tab-order:

Tabキーによるフォーカスの移動順序
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. _gl-form-tab-order:

-  [MUST] Tab/Shift+Tabキーでフォーカスを移動させたとき、コンテンツの意味に合った適切な順序でフォーカスを移動させる。

   .. raw:: html

      <details>

   意図
      *  スクリーン・リーダーなどの支援技術がコンテンツを正しく認識し、ユーザーに適切な形で提示できるようにする。
   チェック内容
      *  Tab/Shift+Tabキーを使ってフォーム・コントロールの間でフォーカスを移動させたとき、レイアウト的にも想定される入力順序的にも自然な順序でフォーカスが移動する。
   チェック対象
      |behavior| 、 |markup|
   参考
      *  :ref:`exp-tab-order-check` 
   対応するWCAG 2.1の達成基準
      *  SC 2.4.3:

         *  |SC 2.4.3|
         *  |SC 2.4.3ja|

   .. raw:: html

      </details>


.. _form-dynamic-content:

予期できない動的な変化の抑制
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

参考: :ref:`exp-form-dynamic-content`

.. _gl-form-dynamic-content-focus:

-  [MUST] フォーカスを受け取ったときに、コンテンツの意味を変える、またはページ全体に及ぶような動的な変化を引き起こすフォーム・コントロールやコンポーネントを用いない。

   .. raw:: html

      <details>

   意図
      *  視覚障害、認知障害があるユーザーが予期できない挙動を発生させない。
   チェック内容
      *  フォーカスを受け取ったときに以下のような変化を自動的に引き起こすようなフォーム・コントロールがない:

         -  フォームの送信
         -  レイアウトの変更
         -  ページの遷移
         -  モーダル・ダイアログの表示
         -  表示内容の大幅な変更など

   チェック対象
      |behavior|
   対応するWCAG 2.1の達成基準
      *  SC 3.2.1:

         *  |SC 3.2.1|
         *  |SC 3.2.1ja|

   .. raw:: html

      </details>

   .. _gl-form-dynamic-content-change:
-  [MUST] 値が変更されたときに、コンテンツの意味の変更、ページ全体に及ぶような変化、他のフォーム・フィールドの値の変更などを引き起こすようなフォーム・フィールドを作らない、またはそのようなフォーム・フィールドの挙動について、事前にユーザーに知らせる。

   .. raw:: html

      <details>

   意図
      *  視覚障害、認知障害があるユーザーが予期できない挙動を発生させない。
   チェック内容
      *  フォーム中のフィールドの値の変更や、値変更後のフォーカス移動がトリガーとなって、ページ全体に及ぶような大幅な表示内容の変更、ページ遷移、別のフィールドの値の変更が起こらない。
   チェック対象
      |behavior|
   対応するWCAG 2.1の達成基準
      *  SC 3.2.2:

         *  |SC 3.2.2|
         *  |SC 3.2.2ja|

   .. raw:: html

      </details>


.. _form-errors:

エラーの扱い
~~~~~~~~~~~~

参考: :ref:`exp-form-errors`

.. _gl-form-errors-identify:

-  [MUST] 入力エラーがある場合、エラー箇所とエラー内容をテキストで知らせる。

   .. raw:: html

      <details>

   意図
      *  視覚障害者、色弱者が、エラー箇所を特定できるようにする。
   チェック内容
      *  フォーム入力に関するエラー発生時には、エラーの内容が具体的に分かるテキスト情報が表示される。
   チェック対象
      |visual|
   対応するWCAG 2.1の達成基準
      *  SC 3.3.1:

         *  |SC 3.3.1|
         *  |SC 3.3.1ja|

   .. raw:: html

      </details>

   .. _gl-form-errors-correction:
-  [SHOULD] 入力エラーがある場合に、修正方法を示す。

   .. raw:: html

      <details>

   意図
      *  フォーム入力における認知障害者、学習障害者の困難を軽減する。
   チェック内容
      *  フォーム入力に関するエラー・メッセージには、エラーの修正方法が示されている。
   チェック対象
      |visual|
   対応するWCAG 2.1の達成基準
      *  SC 3.3.3:

         *  |SC 3.3.3|
         *  |SC 3.3.3ja|

   .. raw:: html

      </details>

   .. _gl-form-errors-cancel:
-  [SHOULD] 誤った操作が確定することでユーザーに不利益が生じる可能性がある機能については、取り消し、送信前の確認・修正、または送信時のエラー・チェックと修正を可能にする。

   .. raw:: html

      <details>

   意図
      *  誤操作による影響を少なくする。
   チェック内容
      *  .. todo:: SC 3.3.4のチェック内容を検討する
   チェック対象
      |functionality|
   対応するWCAG 2.1の達成基準
      *  SC 3.3.4:

         *  |SC 3.3.4|
         *  |SC 3.3.4ja|

   .. raw:: html

      </details>


.. _form-target-size:

クリック/タッチのターゲット・サイズ
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. _gl-form-target-size:

-  [SHOULD] クリック/タッチのターゲット・サイズは充分に大きいものにする。

   .. todo:: フォーム・コントロールのターゲット・サイズはどうするか


   .. raw:: html

      <details>

   意図
      *  ロービジョン者、細かい手の動きが難しい肢体不自由者の、誤ったクリック/タッチ操作を防ぐ。
   チェック内容
      *  クリッカブルなエリアのサイズを確認する。

         .. todo:: ターゲット・サイズの確認方法

   チェック対象
      |visual|
   参考
      *  :ref:`exp-target-size`
   対応するWCAG 2.1の達成基準
      *  SC 2.5.5:

         *  |SC 2.5.5|
         *  |SC 2.5.5ja|

   .. raw:: html

      </details>

